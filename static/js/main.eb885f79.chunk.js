(this["webpackJsonpholo-now"]=this["webpackJsonpholo-now"]||[]).push([[0],{36:function(e,t,n){e.exports=n(71)},41:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(20),c=n.n(l),o=(n(41),n(8)),i=n(6),u=n(14),m=n(1),s=n(10),v=n(24),f=n(9),p=n.n(f),d=n(11),h=n(21),E=Object(i.atom)({key:"lives",default:{updatedAt:null,lives:[]}}),b=Object(i.selector)({key:"incomingLives",get:function(e){var t=(0,e.get)(E),n=Date.now()-36e5;return t.lives.filter((function(e){return e.time.valueOf()>n}))}}),g=E;function w(){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/schedule.json");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,Array.isArray(n)){e.next=8;break}throw new Error("Get lives failed");case 8:return e.abrupt("return",n.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{time:new Date(e.time)})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){var e=Object(i.useRecoilState)(g),t=Object(d.a)(e,2),n=t[0],r=t[1],l=Object(a.useCallback)(Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.updatedAt){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w();case 5:t=e.sent,r((function(){return{lives:t,updatedAt:new Date}}));case 7:case"end":return e.stop()}}),e)}))),[n,r]);return Object(a.useEffect)((function(){l()}),[l]),null};var k=n(16),x=n(34),y=n.n(x);var A=function(e){var t=e.live,n=t.time,a=t.streamer,l=t.guests,c=t.link,o=y()(n).format("HH:mm"),i=[a].concat(Object(k.a)(l));return r.a.createElement("div",{className:"LiveText"},o,r.a.createElement("br",null),i.join(" "),r.a.createElement("br",null),r.a.createElement("a",{href:c},c))};var L=function(){var e=function(e){var t={};return e.forEach((function(e){var n=e.time.toLocaleDateString();t[n]||(t[n]={date:n,lives:[]}),t[n].lives.push(e)})),Object.entries(t).sort((function(e,t){var n=Object(d.a)(e,1)[0],a=Object(d.a)(t,1)[0];return n.localeCompare(a)})).map((function(e){return Object(d.a)(e,2)[1]}))}(Object(i.useRecoilValue)(b)).map((function(e){var t=e.date,n=e.lives.map((function(e){return r.a.createElement(A,{key:e.videoId,live:e})}));return r.a.createElement("div",{key:t},r.a.createElement("h2",null,t),n)}));return r.a.createElement("div",{className:"LiveList"},e)};var N=function(){var e=Object(i.useRecoilValue)(b).map((function(e){var t=e.link,n=e.livePreviewImage,a=e.time,l=e.streamer,c=e.guests,o=[l].concat(Object(k.a)(c));return r.a.createElement("div",{key:e.link},a.toLocaleTimeString(),r.a.createElement("br",null),o.join(" "),r.a.createElement("br",null),r.a.createElement("a",{href:t},r.a.createElement("img",{alt:"video-preview",src:n})),r.a.createElement("br",null))}));return r.a.createElement(r.a.Fragment,null,e)};function H(){var e=Object(o.a)(["\n  float: left;\n\n  a {\n  display: block;\n  padding: 5px;\n  color: white;\n  text-decoration: none;\n}\na:hover {\n  background-color: black;\n}\n"]);return H=function(){return e},e}function R(){var e=Object(o.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n"]);return R=function(){return e},e}function S(){var e=Object(o.a)(["\n  padding-left: clamp(.5rem, 2vw, 1rem);\n  padding-right: clamp(.5rem, 2vw, 1rem);\n  background-color: #333;\n"]);return S=function(){return e},e}var D=s.a.nav(S()),T=s.a.ul(R()),C=s.a.li(H());var I=function(){return r.a.createElement(D,null,r.a.createElement(T,null,r.a.createElement(C,null,r.a.createElement(u.b,{to:"/"},"Home")),r.a.createElement(C,null,r.a.createElement(u.b,{to:"/text"},"Text")),r.a.createElement(C,null,r.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://holonow.github.io/holo-data/schedule.json"},"JSON"))))};function J(){var e=Object(o.a)(["\n  padding-left: clamp(.5rem, 2vw, 1rem);\n  padding-right: clamp(.5rem, 2vw, 1rem);\n"]);return J=function(){return e},e}var W=s.a.main(J());var B=function(){return r.a.createElement(u.a,null,r.a.createElement(i.RecoilRoot,null,r.a.createElement(O,null),r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement(W,null,r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Holo Now"),r.a.createElement("p",null,"A Tool to Watch Hololive"),r.a.createElement("p",null,"(Coming soon)")),r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/text"},r.a.createElement(L,null)),r.a.createElement(m.a,{path:"/"},r.a.createElement(N,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.eb885f79.chunk.js.map