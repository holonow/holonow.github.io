(this["webpackJsonpholo-now"]=this["webpackJsonpholo-now"]||[]).push([[0],{41:function(e,n,t){e.exports=t(76)},46:function(e,n,t){},76:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(26),o=t.n(c),l=(t(46),t(3)),i=t(5),u=t(16),s=t(1),m=t(4),f=t(29),v=t(9),d=t.n(v),p=t(17),b=Object(i.atom)({key:"lives",default:{updatedAt:null,lives:[]}}),h=Object(i.selector)({key:"incomingLives",get:function(e){var n=(0,e.get)(b),t=Date.now()-36e5;return n.lives.filter((function(e){return e.streaming||e.time.valueOf()>t}))}}),g=b,E=Object(i.atom)({key:"liveImages",default:{updatedAt:null,liverImageMap:{}}});function w(){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(d.a.mark((function e(){var n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/schedule.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,Array.isArray(t)){e.next=8;break}throw new Error("Get lives failed");case 8:return e.abrupt("return",t.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{time:new Date(e.time)})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(d.a.mark((function e(){var n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/imageMap.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if((t=e.sent)["\u8d64\u4e95\u306f\u3042\u3068"]){e.next=8;break}throw new Error("Get image map failed");case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){return function(){var e=Object(i.useSetRecoilState)(g),n=Object(r.useCallback)(Object(p.a)(d.a.mark((function n(){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w();case 2:t=n.sent,e((function(){return{lives:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(r.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),function(){var e=Object(i.useSetRecoilState)(E),n=Object(r.useCallback)(Object(p.a)(d.a.mark((function n(){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O();case 2:t=n.sent,e((function(){return{liverImageMap:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(r.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),null},k=t(12),I=t(39),A=t.n(I);function S(){var e=Object(l.a)(["\n  ","\n  html {\n  box-sizing: border-box;\n  }\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n"]);return S=function(){return e},e}var L=Object(k.css)(S(),A.a),R=function(){return a.a.createElement(k.Global,{styles:L})},D=t(22);function G(e){var n={};return e.forEach((function(e){var t=e.time.toLocaleDateString();n[t]||(n[t]={date:t,lives:[]}),n[t].lives.push(e)})),Object.entries(n).sort((function(e,n){var t=Object(D.a)(e,1)[0],r=Object(D.a)(n,1)[0];return t.localeCompare(r)})).map((function(e){return Object(D.a)(e,2)[1]}))}var H=t(21),N=t(20),M=t.n(N);var C=function(e){var n=e.live,t=n.time,r=n.streamer,c=n.guests,o=n.link,l=M()(t).format("HH:mm"),i=[r].concat(Object(H.a)(c));return a.a.createElement("div",{className:"LiveText"},l,a.a.createElement("br",null),i.join(" "),a.a.createElement("br",null),a.a.createElement("a",{href:o},o))};var J=function(){var e=G(Object(i.useRecoilValue)(h)).map((function(e){var n=e.date,t=e.lives.map((function(e){return a.a.createElement(C,{key:e.videoId,live:e})}));return a.a.createElement("div",{key:n},a.a.createElement("h2",null,n),t)}));return a.a.createElement("div",{className:"LiveList"},e)};function W(){var e=Object(l.a)(["\n  color: grey;\n  font-weight: bold;\n"]);return W=function(){return e},e}function z(){var e=Object(l.a)(["\n  width: clamp(176px, 46vw, 250px);\n  padding: .125rem;\n"]);return z=function(){return e},e}function B(){var e=Object(l.a)(["\n  color: #444;\n"]);return B=function(){return e},e}function T(){var e=Object(l.a)(["\n  display: block;\n  width: 100%;\n"]);return T=function(){return e},e}function V(){var e=Object(l.a)(["\n  width: 100%;\n  border: "," solid 2px;\n"]);return V=function(){return e},e}var P=m.a.img(V(),(function(e){return e.streaming?"red":"lightgray"})),$=m.a.a(T()),_=m.a.div(B()),q=m.a.div(z()),F=m.a.time(W());var K=function(e){var n=e.live,t=n.link,r=n.livePreviewImage,c=n.time,o=n.streamer,l=n.guests,i=n.streaming,u=[o].concat(Object(H.a)(l));return a.a.createElement(q,null,a.a.createElement(_,null,a.a.createElement(F,null,M()(c).format("HH:mm")),a.a.createElement($,{href:t},a.a.createElement(P,{alt:"video-preview",src:r,streaming:i})),u.join(" ")))};function Q(){var e=Object(l.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return Q=function(){return e},e}function U(){var e=Object(l.a)(["\n  border-bottom: solid 1px lightgray;\n  margin-top: .5rem;\n  padding-bottom: 1rem;\n"]);return U=function(){return e},e}function X(){var e=Object(l.a)(["\n  display: block;\n  font-weight: bold;\n  padding: .5rem;\n  text-align: center;\n"]);return X=function(){return e},e}var Y=m.a.time(X()),Z=m.a.section(U()),ee=m.a.div(Q());var ne=function(e){var n=e.dayGroup,t=n.lives,r=n.date,c=t.map((function(e){return a.a.createElement(K,{key:e.videoId,live:e})}));return a.a.createElement(Z,null,a.a.createElement(Y,null,r),a.a.createElement(ee,null,c))};var te=function(){var e=G(Object(i.useRecoilValue)(h)).map((function(e){return a.a.createElement(ne,{key:e.date,dayGroup:e})}));return a.a.createElement("div",{className:"Lives"},e)};function re(){var e=Object(l.a)(["\n  float: left;\n\n  a {\n  display: block;\n  padding: 5px;\n  color: white;\n  text-decoration: none;\n  }\n\n  a:hover {\n    background-color: black;\n  }\n"]);return re=function(){return e},e}function ae(){var e=Object(l.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n"]);return ae=function(){return e},e}function ce(){var e=Object(l.a)(["\n  padding-left: clamp(.5rem, 2vw, 1rem);\n  padding-right: clamp(.5rem, 2vw, 1rem);\n  background-color: #333;\n"]);return ce=function(){return e},e}var oe=m.a.nav(ce()),le=m.a.ul(ae()),ie=m.a.li(re());var ue=function(){return a.a.createElement(oe,null,a.a.createElement(le,null,a.a.createElement(ie,null,a.a.createElement(u.b,{style:{fontWeight:"bold"},to:"/"},"[Holo now]")),a.a.createElement(ie,null,a.a.createElement(u.b,{to:"/text"},"Text")),a.a.createElement(ie,null,a.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://holonow.github.io/holo-data/schedule.json"},"JSON"))))};function se(){var e=Object(l.a)(["\n  padding-left: clamp(.5rem, 2vw, 1rem);\n  padding-right: clamp(.5rem, 2vw, 1rem);\n"]);return se=function(){return e},e}var me=m.a.main(se());var fe=function(){return a.a.createElement(u.a,null,a.a.createElement(R,null),a.a.createElement(i.RecoilRoot,null,a.a.createElement(y,null),a.a.createElement("div",{className:"App"},a.a.createElement(ue,null),a.a.createElement(me,null,a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/text"},a.a.createElement(J,null)),a.a.createElement(s.a,{path:"/"},a.a.createElement(te,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.bbdc9363.chunk.js.map