(this["webpackJsonpholo-now"]=this["webpackJsonpholo-now"]||[]).push([[0],{31:function(e,t,n){e.exports=n(67)},36:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),c=n.n(l),o=(n(36),n(6)),u=n(11),i=n(1),s=(n(61),n(21)),m=n(8),v=n.n(m),f=n(30),E=n(18),h=Object(o.atom)({key:"lives",default:{updatedAt:null,lives:[]}}),p=Object(o.selector)({key:"incomingLives",get:function(e){var t=(0,e.get)(h),n=Date.now()-36e5;return t.lives.filter((function(e){return e.time.valueOf()>n}))}}),b=h;function d(){return w.apply(this,arguments)}function w(){return(w=Object(E.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/schedule.json");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,Array.isArray(n)){e.next=8;break}throw new Error("Get lives failed");case 8:return e.abrupt("return",n.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{time:new Date(e.time)})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){var e=Object(o.useRecoilState)(b),t=Object(f.a)(e,2),n=t[0],r=t[1],l=Object(a.useCallback)(Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.updatedAt){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d();case 5:t=e.sent,r((function(){return{lives:t,updatedAt:new Date}}));case 7:case"end":return e.stop()}}),e)}))),[n,r]);return Object(a.useEffect)((function(){l()}),[l]),null},j=n(13);var k=function(e){var t=e.live,n=t.time,a=t.streamer,l=t.guests,c=t.link,o=n.toLocaleString(),u=[a].concat(Object(j.a)(l));return r.a.createElement("div",{className:"LiveText"},o,r.a.createElement("br",null),u.join(" "),r.a.createElement("br",null),r.a.createElement("a",{href:c},c))};var O=function(){var e=Object(o.useRecoilValue)(p);return r.a.createElement("div",{className:"LiveList"},e.map((function(e){return r.a.createElement(k,{live:e})})))};var x=function(){var e=Object(o.useRecoilValue)(p).map((function(e){var t=e.link,n=e.livePreviewImage,a=e.time,l=e.streamer,c=e.guests,o=[l].concat(Object(j.a)(c));return r.a.createElement("div",{key:e.link},a.toLocaleTimeString(),r.a.createElement("br",null),o.join(" "),r.a.createElement("br",null),r.a.createElement("a",{href:t},r.a.createElement("img",{alt:"video-preview",src:n})),r.a.createElement("br",null))}));return r.a.createElement(r.a.Fragment,null,e)};var y=function(){return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/text"},"Text Format")),r.a.createElement("li",null,r.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://holonow.github.io/holo-data/schedule.json"},"JSON"))))};var A=function(){return r.a.createElement(u.a,null,r.a.createElement(o.RecoilRoot,null,r.a.createElement(g,null),r.a.createElement("div",{className:"App"},r.a.createElement(y,null),r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Holo Now"),r.a.createElement("p",null,"A Tool to Watch Hololive"),r.a.createElement("p",null,"(Coming soon)")),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/text"},r.a.createElement(O,null)),r.a.createElement(i.a,{path:"/"},r.a.createElement(x,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.aafaa41a.chunk.js.map