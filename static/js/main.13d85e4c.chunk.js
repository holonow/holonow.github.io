(this["webpackJsonpholo-now"]=this["webpackJsonpholo-now"]||[]).push([[0],{47:function(e,n,t){e.exports=t(84)},52:function(e,n,t){},84:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(30),o=t.n(c),l=(t(52),t(4)),u=t(17),i=t(5),m=t(18),f=t(10),s=t.n(f),v=t(20),d=Object(l.atom)({key:"lives",default:{updatedAt:null,lives:[]}}),b=Object(l.atom)({key:"lives/filter",default:{startFrom:"default",vtubers:[]}});function p(e,n){return function(e,n){if("today"===n.startFrom){var t=(new Date).getDate();return e.filter((function(e){return e.time.getDate()===t}))}var a=Date.now()-36e5;return e.filter((function(e){return e.streaming||e.time.valueOf()>a}))}(e,n)}var h=Object(l.selector)({key:"lives/incomingLives",get:function(e){var n=e.get,t=n(d),a=n(b);return p(t.lives,a)}}),E=d,g=Object(l.atom)({key:"liveImages",default:{updatedAt:null,liverImageMap:{}}});function j(){return w.apply(this,arguments)}function w(){return(w=Object(v.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/schedule.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,Array.isArray(t)){e.next=8;break}throw new Error("Get lives failed");case 8:return e.abrupt("return",t.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{time:new Date(e.time)})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(v.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/imageMap.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if((t=e.sent)["\u8d64\u4e95\u306f\u3042\u3068"]){e.next=8;break}throw new Error("Get image map failed");case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){return function(){var e=Object(l.useSetRecoilState)(E),n=Object(a.useCallback)(Object(v.a)(s.a.mark((function n(){var t;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:t=n.sent,e((function(){return{lives:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(a.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),function(){var e=Object(l.useSetRecoilState)(g),n=Object(a.useCallback)(Object(v.a)(s.a.mark((function n(){var t;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O();case 2:t=n.sent,e((function(){return{liverImageMap:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(a.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),null},x=t(2),I=t(14),S=t(42),R=t.n(S);function A(){var e=Object(x.a)(["\n  ","\n\n  html {\n    box-sizing: border-box;\n  }\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n\n  body {\n    color: #EEE;\n    background-color: #121212;\n  }\n\n  a {\n    color: #EEE;\n  }\n\n  a:hover {\n    color: lightskyblue;\n  }\n"]);return A=function(){return e},e}var C=Object(I.css)(A(),R.a),D=function(){return r.a.createElement(I.Global,{styles:C})},H=t(16);function N(e){var n={};return e.forEach((function(e){var t=e.time.toLocaleDateString();n[t]||(n[t]={date:t,lives:[]}),n[t].lives.push(e)})),Object.entries(n).sort((function(e,n){var t=Object(H.a)(e,1)[0],a=Object(H.a)(n,1)[0];return t.localeCompare(a)})).map((function(e){return Object(H.a)(e,2)[1]}))}var F=t(26),G=t(24),L=t.n(G),M=t(3);function z(){var e=Object(x.a)(["\n  margin-bottom: .5rem;\n"]);return z=function(){return e},e}var J=M.a.div(z());var T=function(e){var n=e.live,t=n.time,a=n.streamer,c=n.guests,o=n.videoId,l="https://youtu.be/".concat(o),u=L()(t).format("HH:mm"),i=[a].concat(Object(F.a)(c));return r.a.createElement(J,{className:"LiveText"},u,r.a.createElement("br",null),i.join(" "),r.a.createElement("br",null),r.a.createElement("a",{href:l},l))};function W(){var e=Object(x.a)(["\n  padding: 0 clamp(.25rem, 2vw, 1rem);\n"]);return W=function(){return e},e}var B=M.a.div(W());var V=function(){var e=N(Object(l.useRecoilValue)(h)).map((function(e){var n=e.date,t=e.lives.map((function(e){return r.a.createElement(T,{key:e.videoId,live:e})}));return r.a.createElement("section",{key:n},r.a.createElement("h2",null,n),t)}));return r.a.createElement(B,{className:"LiveList"},e)};function _(){var e=Object(x.a)(["\n  font-weight: bold;\n"]);return _=function(){return e},e}function P(){var e=Object(x.a)(["\n  width: clamp(158px, 49vw, 250px);\n  padding: clamp(.125rem, .53vw, .25rem);\n  padding-bottom: clamp(.375rem, 1.5vw, .5rem);\n"]);return P=function(){return e},e}function U(){var e=Object(x.a)(["\n"]);return U=function(){return e},e}function $(){var e=Object(x.a)(["\n  display: block;\n  width: 100%;\n"]);return $=function(){return e},e}function q(){var e=Object(x.a)(["\n  width: 100%;\n  border: "," solid 2px;\n"]);return q=function(){return e},e}var K=M.a.img(q(),(function(e){return e.streaming?"red":"#444"})),Q=M.a.a($()),X=M.a.div(U()),Y=M.a.div(P()),Z=M.a.time(_());var ee=function(e){var n=e.live,t=n.link,a=n.livePreviewImage,c=n.time,o=n.streamer,l=n.guests,u=n.streaming,i=[o].concat(Object(F.a)(l));return r.a.createElement(Y,null,r.a.createElement(X,null,r.a.createElement(Z,null,L()(c).format("HH:mm")),r.a.createElement(Q,{href:t},r.a.createElement(K,{alt:"video-preview",src:a,streaming:u})),i.join(" ")))};function ne(){var e=Object(x.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return ne=function(){return e},e}function te(){var e=Object(x.a)(["\n  border-bottom: solid 1px #444;\n  margin-top: .5rem;\n  padding-bottom: 1rem;\n"]);return te=function(){return e},e}function ae(){var e=Object(x.a)(["\n  display: block;\n  font-weight: bold;\n  padding: .5rem;\n  text-align: center;\n"]);return ae=function(){return e},e}var re=M.a.time(ae()),ce=M.a.section(te()),oe=M.a.div(ne());var le=function(e){var n=e.dayGroup,t=n.lives,a=n.date,c=t.map((function(e){return r.a.createElement(ee,{key:e.videoId,live:e})}));return r.a.createElement(ce,null,r.a.createElement(re,null,a),r.a.createElement(oe,null,c))};var ue=function(){var e=N(Object(l.useRecoilValue)(h)).map((function(e){return r.a.createElement(le,{key:e.date,dayGroup:e})}));return r.a.createElement("div",{className:"Lives"},e)},ie=t(13),me=t(45),fe=t(25),se=Object(l.atom)({key:"ui/showSettings",default:!0});var ve=function(){var e=Object(l.useSetRecoilState)(se);return r.a.createElement("button",{type:"button",onClick:function(){e(!0)}},r.a.createElement(ie.a,{icon:fe.a}))};function de(){var e=Object(x.a)(["\n  float: none;\n  li {\n    float: right;\n  }\n"]);return de=function(){return e},e}function be(){var e=Object(x.a)(["\n  float: left;\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n\n  li {\n    float: left;\n  }\n"]);return be=function(){return e},e}function pe(){var e=Object(x.a)(["\n  padding-left: clamp(.5rem, 2vw, 1rem);\n  padding-right: clamp(.5rem, 2vw, 1rem);\n  background-color: #333;\n\n  a, button {\n    display: block;\n    padding: 5px;\n    color: white;\n    text-decoration: none;\n    border: none;\n    background-color: rgba(0, 0, 0, 0);\n  }\n\n  a:hover, button:hover {\n    background-color: black;\n  }\n"]);return pe=function(){return e},e}var he=M.a.nav(pe()),Ee=M.a.ul(be()),ge=Object(M.a)(Ee)(de()),je=function(){return r.a.createElement("a",{target:"_blank",href:"https://holonow.github.io/holo-data/schedule.json"},"JSON")};var we=function(){return r.a.createElement(he,null,r.a.createElement(Ee,null,r.a.createElement("li",null,r.a.createElement(u.b,{style:{fontWeight:"bold"},to:"/"},"[Holo Now]")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/text"},"Text")),r.a.createElement("li",null,r.a.createElement(je,null))),r.a.createElement(ge,null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/about"},r.a.createElement(ie.a,{icon:me.a}))),r.a.createElement("li",null,r.a.createElement(ve,null))))},Oe=t(46),ke=function(){return r.a.createElement("a",{target:"_blank",href:"https://github.com/holonow/holonow.github.io"},r.a.createElement(ie.a,{icon:Oe.a})," ","GitHub")};var ye=function(){return r.a.createElement(B,null,r.a.createElement("h2",null,"About Holo Now"),r.a.createElement("p",null,"Unofficial Hololive schedule viewer."),r.a.createElement("p",null,"Checkout source code at"," ",r.a.createElement(ke,null)))};function xe(){var e=Object(x.a)(["\n  input {\n    margin-right: .25rem;\n    margin-left: 1rem;\n  }\n"]);return xe=function(){return e},e}function Ie(){var e=Object(x.a)(["\n  padding: 1rem;\n  padding-top: 0;\n"]);return Ie=function(){return e},e}function Se(){var e=Object(x.a)(["\n  background-color: #333;\n  border: 1px solid #555;\n  margin: 2rem auto;\n  width: clamp(0px, 90%, 800px);\n\n  h3 {\n    margin: 0;\n  }\n"]);return Se=function(){return e},e}function Re(){var e=Object(x.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  padding-top: .5rem;\n  padding-right: .5rem;\n"]);return Re=function(){return e},e}function Ae(){var e=Object(x.a)(["\n  display: ",";\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0,0,0,0.4);\n"]);return Ae=function(){return e},e}var Ce=M.a.div(Ae(),(function(e){return e.open?"block":"none"})),De=M.a.div(Re()),He=M.a.div(Se()),Ne=M.a.div(Ie()),Fe=M.a.div(xe());var Ge=function(){var e=Object(l.useRecoilState)(se),n=Object(H.a)(e,2),t=n[0],a=n[1],c=Object(l.useRecoilState)(b),o=Object(H.a)(c,2),u=o[0],i=o[1],f=function(e){var n=e.target.value;i((function(e){return Object(m.a)(Object(m.a)({},e),{},{startFrom:n})}))};return r.a.createElement(Ce,{open:t},r.a.createElement(He,null,r.a.createElement(De,null,r.a.createElement(ie.a,{onClick:function(){return a(!1)},icon:fe.b})),r.a.createElement(Ne,null,r.a.createElement("h3",null,"Filter"),r.a.createElement(Fe,null,"Time",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:"default",checked:"default"===u.startFrom,onChange:f}),"default"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:"today",checked:"today"===u.startFrom,onChange:f}),"today")))))};var Le=function(){return r.a.createElement(u.a,null,r.a.createElement(D,null),r.a.createElement(l.RecoilRoot,null,r.a.createElement(y,null),r.a.createElement("div",{className:"App"},r.a.createElement(we,null),r.a.createElement("main",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/text"},r.a.createElement(V,null)),r.a.createElement(i.a,{path:"/about"},r.a.createElement(ye,null)),r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(ue,null))),r.a.createElement(Ge,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.13d85e4c.chunk.js.map