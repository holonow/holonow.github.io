(this["webpackJsonpholo-now"]=this["webpackJsonpholo-now"]||[]).push([[0],{41:function(e,n,t){e.exports=t(76)},46:function(e,n,t){},76:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(26),o=t.n(c),u=(t(46),t(5)),l=t(16),i=t(1),s=t(29),m=t(9),f=t.n(m),v=t(17),d=Object(u.atom)({key:"lives",default:{updatedAt:null,lives:[]}}),p=Object(u.selector)({key:"incomingLives",get:function(e){var n=(0,e.get)(d),t=Date.now()-36e5;return n.lives.filter((function(e){return e.streaming||e.time.valueOf()>t}))}}),b=d,h=Object(u.atom)({key:"liveImages",default:{updatedAt:null,liverImageMap:{}}});function E(){return g.apply(this,arguments)}function g(){return(g=Object(v.a)(f.a.mark((function e(){var n,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/schedule.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,Array.isArray(t)){e.next=8;break}throw new Error("Get lives failed");case 8:return e.abrupt("return",t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{time:new Date(e.time)})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return j.apply(this,arguments)}function j(){return(j=Object(v.a)(f.a.mark((function e(){var n,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/imageMap.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if((t=e.sent)["\u8d64\u4e95\u306f\u3042\u3068"]){e.next=8;break}throw new Error("Get image map failed");case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){return function(){var e=Object(u.useSetRecoilState)(b),n=Object(r.useCallback)(Object(v.a)(f.a.mark((function n(){var t;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E();case 2:t=n.sent,e((function(){return{lives:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(r.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),function(){var e=Object(u.useSetRecoilState)(h),n=Object(r.useCallback)(Object(v.a)(f.a.mark((function n(){var t;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w();case 2:t=n.sent,e((function(){return{liverImageMap:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(r.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),null},x=t(2),k=t(12),y=t(38),I=t.n(y);function A(){var e=Object(x.a)(["\n  ","\n\n  html {\n    box-sizing: border-box;\n  }\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n\n  body {\n    color: #EEE;\n    background-color: #121212;\n  }\n\n  a {\n    color: lightskyblue;\n  }\n"]);return A=function(){return e},e}var S=Object(k.css)(A(),I.a),L=function(){return a.a.createElement(k.Global,{styles:S})},R=t(4),D=t(22);function G(e){var n={};return e.forEach((function(e){var t=e.time.toLocaleDateString();n[t]||(n[t]={date:t,lives:[]}),n[t].lives.push(e)})),Object.entries(n).sort((function(e,n){var t=Object(D.a)(e,1)[0],r=Object(D.a)(n,1)[0];return t.localeCompare(r)})).map((function(e){return Object(D.a)(e,2)[1]}))}var H=t(21),N=t(20),M=t.n(N);function C(){var e=Object(x.a)(["\n  margin-bottom: .5rem;\n"]);return C=function(){return e},e}var J=R.a.div(C());var W=function(e){var n=e.live,t=n.time,r=n.streamer,c=n.guests,o=n.videoId,u="https://youtu.be/".concat(o),l=M()(t).format("HH:mm"),i=[r].concat(Object(H.a)(c));return a.a.createElement(J,{className:"LiveText"},l,a.a.createElement("br",null),i.join(" "),a.a.createElement("br",null),a.a.createElement("a",{href:u},u))};function z(){var e=Object(x.a)(["\n  padding: 0 clamp(.25rem, 2vw, 1rem);\n"]);return z=function(){return e},e}var B=R.a.div(z());var T=function(){var e=G(Object(u.useRecoilValue)(p)).map((function(e){var n=e.date,t=e.lives.map((function(e){return a.a.createElement(W,{key:e.videoId,live:e})}));return a.a.createElement("section",{key:n},a.a.createElement("h2",null,n),t)}));return a.a.createElement(B,{className:"LiveList"},e)};function V(){var e=Object(x.a)(["\n  font-weight: bold;\n"]);return V=function(){return e},e}function P(){var e=Object(x.a)(["\n  width: clamp(158px, 49vw, 250px);\n  padding: clamp(.125rem, .53vw, .25rem);\n  padding-bottom: clamp(.375rem, 1.5vw, .5rem);\n"]);return P=function(){return e},e}function $(){var e=Object(x.a)(["\n"]);return $=function(){return e},e}function _(){var e=Object(x.a)(["\n  display: block;\n  width: 100%;\n"]);return _=function(){return e},e}function q(){var e=Object(x.a)(["\n  width: 100%;\n  border: "," solid 2px;\n"]);return q=function(){return e},e}var F=R.a.img(q(),(function(e){return e.streaming?"red":"#444"})),K=R.a.a(_()),Q=R.a.div($()),U=R.a.div(P()),X=R.a.time(V());var Y=function(e){var n=e.live,t=n.link,r=n.livePreviewImage,c=n.time,o=n.streamer,u=n.guests,l=n.streaming,i=[o].concat(Object(H.a)(u));return a.a.createElement(U,null,a.a.createElement(Q,null,a.a.createElement(X,null,M()(c).format("HH:mm")),a.a.createElement(K,{href:t},a.a.createElement(F,{alt:"video-preview",src:r,streaming:l})),i.join(" ")))};function Z(){var e=Object(x.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return Z=function(){return e},e}function ee(){var e=Object(x.a)(["\n  border-bottom: solid 1px #444;\n  margin-top: .5rem;\n  padding-bottom: 1rem;\n"]);return ee=function(){return e},e}function ne(){var e=Object(x.a)(["\n  display: block;\n  font-weight: bold;\n  padding: .5rem;\n  text-align: center;\n"]);return ne=function(){return e},e}var te=R.a.time(ne()),re=R.a.section(ee()),ae=R.a.div(Z());var ce=function(e){var n=e.dayGroup,t=n.lives,r=n.date,c=t.map((function(e){return a.a.createElement(Y,{key:e.videoId,live:e})}));return a.a.createElement(re,null,a.a.createElement(te,null,r),a.a.createElement(ae,null,c))};var oe=function(){var e=G(Object(u.useRecoilValue)(p)).map((function(e){return a.a.createElement(ce,{key:e.date,dayGroup:e})}));return a.a.createElement("div",{className:"Lives"},e)};function ue(){var e=Object(x.a)(["\n  float: left;\n\n  a {\n  display: block;\n  padding: 5px;\n  color: white;\n  text-decoration: none;\n  }\n\n  a:hover {\n    background-color: black;\n  }\n"]);return ue=function(){return e},e}function le(){var e=Object(x.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n"]);return le=function(){return e},e}function ie(){var e=Object(x.a)(["\n  padding-left: clamp(.5rem, 2vw, 1rem);\n  padding-right: clamp(.5rem, 2vw, 1rem);\n  background-color: #333;\n"]);return ie=function(){return e},e}var se=R.a.nav(ie()),me=R.a.ul(le()),fe=R.a.li(ue());var ve=function(){return a.a.createElement(se,null,a.a.createElement(me,null,a.a.createElement(fe,null,a.a.createElement(l.b,{style:{fontWeight:"bold"},to:"/"},"[Holo now]")),a.a.createElement(fe,null,a.a.createElement(l.b,{to:"/text"},"Text")),a.a.createElement(fe,null,a.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://holonow.github.io/holo-data/schedule.json"},"JSON"))))};var de=function(){return a.a.createElement(l.a,null,a.a.createElement(L,null),a.a.createElement(u.RecoilRoot,null,a.a.createElement(O,null),a.a.createElement("div",{className:"App"},a.a.createElement(ve,null),a.a.createElement("main",null,a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/text"},a.a.createElement(T,null)),a.a.createElement(i.a,{exact:!0,path:"/"},a.a.createElement(oe,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.be1b50ca.chunk.js.map