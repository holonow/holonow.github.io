(this["webpackJsonpholo-now"]=this["webpackJsonpholo-now"]||[]).push([[0],{48:function(e,n,t){e.exports=t(85)},53:function(e,n,t){},85:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(30),o=t.n(c),l=(t(53),t(4)),i=t(19),u=t(5),s=t(7),m=t.n(s),f=t(15),b=Object(l.atom)({key:"lives",default:{updatedAt:null,lives:[]}}),d=Object(l.atom)({key:"lives/filter",default:{startFrom:"default",vtubers:[],allVtubers:!0}});function v(e,n){return function(e,n){var t=n.vtubers;if(n.allVtubers)return e;var r=new Set(t);return e.filter((function(e){return r.has(e.streamer)||e.guests.some((function(e){return r.has(e)}))}))}(function(e,n){if("today"===n.startFrom){var t=(new Date).getDate();return e.filter((function(e){return e.time.getDate()===t}))}var r=Date.now()-36e5;return e.filter((function(e){return e.streaming||e.time.valueOf()>r}))}(e,n),n)}var p=Object(l.selector)({key:"lives/incomingLives",get:function(e){var n=e.get,t=n(b),r=n(d);return v(t.lives,r)}}),h=b,g=Object(l.atom)({key:"liveImages",default:{updatedAt:null,liverImageMap:{}}}),E=t(34);function j(){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(m.a.mark((function e(){var n,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/schedule.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,Array.isArray(t)){e.next=8;break}throw new Error("Get lives failed");case 8:return e.abrupt("return",t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{time:new Date(e.time)})})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(m.a.mark((function e(){var n,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://holonow.github.io/holo-data/imageMap.json");case 2:return n=e.sent,e.next=5,n.json();case 5:if((t=e.sent)["\u8d64\u4e95\u306f\u3042\u3068"]){e.next=8;break}throw new Error("Get image map failed");case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){return function(){var e=Object(l.useSetRecoilState)(h),n=Object(r.useCallback)(Object(f.a)(m.a.mark((function n(){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:t=n.sent,e((function(){return{lives:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(r.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),function(){var e=Object(l.useSetRecoilState)(g),n=Object(r.useCallback)(Object(f.a)(m.a.mark((function n(){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w();case 2:t=n.sent,e((function(){return{liverImageMap:t,updatedAt:new Date}}));case 4:case"end":return n.stop()}}),n)}))),[e]);Object(r.useEffect)((function(){n();var e=setInterval(n,3e5);return function(){clearInterval(e)}}),[n])}(),null},y=t(1),S=t(16),C=t(43),R=t.n(C);function A(){var e=Object(y.a)(["\n  ","\n\n  :root {\n    --bg-color: #181818;\n    --main-text-color: white;\n    --second-text-color: #AAA;\n  }\n\n  html {\n    box-sizing: border-box;\n  }\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n\n  body {\n    color: var(--second-text-color);\n    background-color: #181818;\n  }\n\n  a {\n    color: var(--second-text-color);\n  }\n\n  a:hover {\n    color: lightskyblue;\n  }\n\n  h1, h2, h3, h4, h5, h6, strong {\n    color: var(--main-text-color);\n  }\n"]);return A=function(){return e},e}var I=Object(S.css)(A(),R.a),V=function(){return a.a.createElement(S.Global,{styles:I})},H=t(10);function D(e){var n={};return e.forEach((function(e){var t=e.time.toLocaleDateString();n[t]||(n[t]={date:t,lives:[]}),n[t].lives.push(e)})),Object.entries(n).sort((function(e,n){var t=Object(H.a)(e,1)[0],r=Object(H.a)(n,1)[0];return t.localeCompare(r)})).map((function(e){return Object(H.a)(e,2)[1]}))}var L=t(26),N=t(25),F=t.n(N),G=t(2),M=Object(l.atom)({key:"ui/showSettings",default:!1}),T=Object(l.atom)({key:"ui/showLiveTitle",default:!0});function z(){var e=Object(y.a)(["\n  margin-bottom: .5rem;\n  color: var(--main-text-color);\n"]);return z=function(){return e},e}var B=G.a.div(z());var J=function(e){var n=e.live,t=n.time,r=n.streamer,c=n.guests,o=n.videoId,i=n.title,u=Object(l.useRecoilValue)(T)&&Boolean(i),s="https://youtu.be/".concat(o),m=F()(t).format("HH:mm"),f=[r].concat(Object(L.a)(c));return a.a.createElement(B,{className:"LiveText"},a.a.createElement("time",null,m),a.a.createElement("br",null),f.join("\u3001"),u&&a.a.createElement("br",null),u&&i,a.a.createElement("br",null),a.a.createElement("a",{href:s},s))};function W(){var e=Object(y.a)(["\n  padding: 0 clamp(.25rem, 2vw, 1rem);\n"]);return W=function(){return e},e}var _=G.a.div(W());var K=function(){var e=D(Object(l.useRecoilValue)(p)).map((function(e){var n=e.date,t=e.lives.map((function(e){return a.a.createElement(J,{key:e.videoId,live:e})}));return a.a.createElement("section",{key:n},a.a.createElement("h2",null,n),t)}));return a.a.createElement(_,{className:"LiveList"},e)};function P(){var e=Object(y.a)(["\n  color: var(--main-text-color);\n"]);return P=function(){return e},e}function U(){var e=Object(y.a)(["\n  height: 2.3rem;\n  overflow: hidden;\n"]);return U=function(){return e},e}function X(){var e=Object(y.a)(["\n  width: clamp(158px, 49vw, 250px);\n  padding: clamp(.125rem, .53vw, .25rem);\n  padding-bottom: clamp(.375rem, 1.5vw, .5rem);\n"]);return X=function(){return e},e}function Z(){var e=Object(y.a)(["\n"]);return Z=function(){return e},e}function $(){var e=Object(y.a)(["\n  display: block;\n  width: 100%;\n"]);return $=function(){return e},e}function q(){var e=Object(y.a)(["\n  width: 100%;\n  border: "," solid 2px;\n"]);return q=function(){return e},e}var Q=G.a.img(q(),(function(e){return e.streaming?"red":"#444"})),Y=G.a.a($()),ee=G.a.div(Z()),ne=G.a.div(X()),te=G.a.div(U()),re=G.a.div(P());var ae=function(e){var n=e.live,t=n.link,r=n.livePreviewImage,c=n.time,o=n.streamer,l=n.guests,i=n.streaming,u=n.title,s=[o].concat(Object(L.a)(l)),m=F()(c).format("HH:mm");return a.a.createElement(ne,null,a.a.createElement(ee,null,a.a.createElement("strong",null,a.a.createElement("time",null,m)),a.a.createElement(Y,{href:t},a.a.createElement(Q,{alt:"video-preview",src:r,streaming:i})),a.a.createElement(re,null,s.join("\u3001")),a.a.createElement(te,null,u)))},ce=t(12),oe=t(18);function le(){var e=Object(y.a)(["\n  display: inline-block;\n  cursor: pointer;\n\n  ","\n  @keyframes spin { 100% { -webkit-transform: rotate(360deg); transform:rotate(360deg); } }\n"]);return le=function(){return e},e}var ie=G.a.div(le(),(function(e){return e.loading?"animation: spin 2s linear infinite;":""}));var ue=function(){var e=Object(r.useState)(!1),n=Object(H.a)(e,2),t=n[0],c=n[1],o=Object(l.useSetRecoilState)(h),i=function(){var e=Object(f.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return c(!0),e.next=5,j();case 5:n=e.sent,o({lives:n,updatedAt:new Date}),setTimeout((function(){c(!1)}),1e3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(ie,{onClick:i,loading:t},a.a.createElement(ce.a,{icon:oe.b}))};function se(){var e=Object(y.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return se=function(){return e},e}function me(){var e=Object(y.a)(["\n  border-bottom: solid 1px #444;\n  margin-top: .5rem;\n  padding-bottom: 1rem;\n"]);return me=function(){return e},e}function fe(){var e=Object(y.a)(["\n  display: inline-block;\n  padding: .5rem;\n  margin: 0;\n  text-align: center;\n  font-size: 1.2rem;\n  font-weight: bold;\n"]);return fe=function(){return e},e}function be(){var e=Object(y.a)(["\n  text-align: center;\n"]);return be=function(){return e},e}var de=G.a.div(be()),ve=G.a.h2(fe()),pe=G.a.section(me()),he=G.a.div(se());var ge=function(e){var n=e.dayGroup,t=n.lives,r=n.date,c=t.map((function(e){return a.a.createElement(ae,{key:e.videoId,live:e})}));return a.a.createElement(pe,null,a.a.createElement(de,null,a.a.createElement(ve,null,a.a.createElement("time",null,r)),a.a.createElement(ue,null)),a.a.createElement(he,null,c))};var Ee=function(){var e=D(Object(l.useRecoilValue)(p)).map((function(e){return a.a.createElement(ge,{key:e.date,dayGroup:e})}));return a.a.createElement("div",{className:"Lives"},e)},je=t(46);var Oe=function(){var e=Object(l.useSetRecoilState)(M);return a.a.createElement("button",{type:"button",onClick:function(){e(!0)}},a.a.createElement(ce.a,{icon:oe.a}))};function we(){var e=Object(y.a)(["\n  float: none;\n  li {\n    float: right;\n  }\n"]);return we=function(){return e},e}function ke(){var e=Object(y.a)(["\n  float: left;\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n\n  li {\n    float: left;\n  }\n"]);return ke=function(){return e},e}function xe(){var e=Object(y.a)(["\n  padding-left: clamp(.5rem, 2vw, 1rem);\n  padding-right: clamp(.5rem, 2vw, 1rem);\n  background-color: #333;\n\n  a, button {\n    display: block;\n    padding: 5px;\n    color: white;\n    text-decoration: none;\n    border: none;\n    background-color: rgba(0, 0, 0, 0);\n  }\n\n  a:hover, button:hover {\n    background-color: black;\n  }\n"]);return xe=function(){return e},e}var ye=G.a.nav(xe()),Se=G.a.ul(ke()),Ce=Object(G.a)(Se)(we()),Re=function(){return a.a.createElement("a",{target:"_blank",href:"https://holonow.github.io/holo-data/schedule.json"},"JSON")};var Ae=function(){return a.a.createElement(ye,null,a.a.createElement(Se,null,a.a.createElement("li",null,a.a.createElement(i.b,{style:{fontWeight:"bold"},to:"/"},"[Holo Now]")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/text"},"Text")),a.a.createElement("li",null,a.a.createElement(Re,null))),a.a.createElement(Ce,null,a.a.createElement("li",null,a.a.createElement(i.b,{to:"/about"},a.a.createElement(ce.a,{icon:je.a}))),a.a.createElement("li",null,a.a.createElement(Oe,null))))},Ie=t(47),Ve=function(){return a.a.createElement("a",{target:"_blank",href:"https://github.com/holonow/holonow.github.io"},a.a.createElement(ce.a,{icon:Ie.a})," ","GitHub")};var He=function(){return a.a.createElement(_,null,a.a.createElement("h2",null,"About Holo Now"),a.a.createElement("p",null,"Unofficial Hololive schedule viewer."),a.a.createElement("p",null,"Checkout source code at"," ",a.a.createElement(Ve,null)))},De=t(20);function Le(){var e=Object(y.a)(["\n  display: ",";\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0,0,0,0.4);\n"]);return Le=function(){return e},e}var Ne=G.a.div(Le(),(function(e){return e.open?"block":"none"}));function Fe(){var e=Object(y.a)(['\n position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  border-radius: 17px;\n  transition: .4s;\n\n  :before {\n    position: absolute;\n    content: "";\n    height: 13px;\n    width: 13px;\n    left: 2px;\n    bottom: 2px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 50%;\n  }\n']);return Fe=function(){return e},e}function Ge(){var e=Object(y.a)(["\n  position: relative;\n  display: inline-block;\n  width: 30px;\n  height: 17px;\n  margin: 0 .5rem;\n\n  /* Hide default HTML checkbox */\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  input:checked + .slider {\n    background-color: #2196F3;\n  }\n\n  input:focus + .slider {\n    box-shadow: 0 0 1px #2196F3;\n  }\n\n  input:checked + .slider:before {\n    transform: translateX(13px);\n  }\n"]);return Ge=function(){return e},e}var Me=G.a.label(Ge()),Te=G.a.span(Fe());var ze=function(e){var n=e.checked,t=e.onChange;return a.a.createElement(Me,null,a.a.createElement("input",{type:"checkbox",checked:n,onChange:t}),a.a.createElement(Te,{className:"slider"}))},Be=[{name:"\uff11\u671f\u751f",members:["\u591c\u7a7a\u30e1\u30eb","\u30a2\u30ad\u30ed\u30bc","\u8d64\u4e95\u306f\u3042\u3068","\u767d\u4e0a\u30d5\u30d6\u30ad","\u590f\u8272\u307e\u3064\u308a"]},{name:"\uff12\u671f\u751f",members:["\u6e4a\u3042\u304f\u3042","\u7d2b\u54b2\u30b7\u30aa\u30f3","\u767e\u9b3c\u3042\u3084\u3081","\u7652\u6708\u3061\u3087\u3053","\u5927\u7a7a\u30b9\u30d0\u30eb"]},{name:"\u30b2\u30fc\u30de",members:["\u5927\u795e\u30df\u30aa","\u732b\u53c8\u304a\u304b\u3086","\u620c\u795e\u3053\u308d\u306d"]},{name:"\uff13\u671f\u751f",members:["\u514e\u7530\u307a\u3053\u3089","\u6f64\u7fbd\u308b\u3057\u3042","\u4e0d\u77e5\u706b\u30d5\u30ec\u30a2","\u767d\u9280\u30ce\u30a8\u30eb","\u5b9d\u9418\u30de\u30ea\u30f3"]},{name:"\uff14\u671f\u751f",members:["\u5929\u97f3\u304b\u306a\u305f","\u6850\u751f\u30b3\u30b3","\u89d2\u5dfb\u308f\u305f\u3081","\u5e38\u95c7\u30c8\u30ef","\u59eb\u68ee\u30eb\u30fc\u30ca"]},{name:"\uff15\u671f\u751f",members:["\u96ea\u82b1\u30e9\u30df\u30a3","\u6843\u9234\u306d\u306d","\u7345\u767d\u307c\u305f\u3093","\u5c3e\u4e38\u30dd\u30eb\u30ab"]},{name:"\u30db\uff08\u4ed6",members:["\u3068\u304d\u306e\u305d\u3089","\u30ed\u30dc\u5b50\u3055\u3093","\u3055\u304f\u3089\u307f\u3053","\u661f\u8857\u3059\u3044\u305b\u3044","AZKi"]}];Be.map((function(e){return e.members})).flat();function Je(){var e=Object(y.a)(["\n  padding: 0;\n  background-color: black;\n  border: none;\n  color: inherit;\n  height: calc(1.2rem + 2px);\n  width: calc(3rem + 2px);\n  flex-shrink: 0;\n  overflow: hidden;\n\n  :hover {\n    background-color: rgba(0,0,0,0);\n    border: solid black 1px;\n  }\n"]);return Je=function(){return e},e}function We(){var e=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  img {\n    margin-left: .25rem;\n  }\n  margin-bottom: .5rem;\n"]);return We=function(){return e},e}function _e(){var e=Object(y.a)(["\n  border-radius: 50%;\n  width: 2.5rem;\n  border: 2px solid ;\n  border-color: ",";\n  filter: ",";\n"]);return _e=function(){return e},e}var Ke=G.a.img(_e(),(function(e){return e.selected?"skyblue":"gray"}),(function(e){return e.selected?"":"grayscale(.7)"})),Pe=G.a.div(We()),Ue=G.a.button(Je());function Xe(e){var n=e.name,t=e.src,r=e.selected,c=e.onClick;return a.a.createElement(Ke,{selected:r,alt:n,src:t,onClick:c})}var Ze=function(){var e=Object(l.useRecoilState)(d),n=Object(H.a)(e,2),t=n[0],r=n[1],c=Object(l.useRecoilValue)(g).liverImageMap,o=t.vtubers,i=t.allVtubers,u=new Set(o),s=Be.map((function(e){var n=e.name,t=e.members,o=t.map((function(e){return a.a.createElement(Xe,{key:e,name:e,selected:i||u.has(e),src:c[e],onClick:function(){r(Object(De.a)((function(n){n.vtubers.indexOf(e)>=0?n.vtubers=n.vtubers.filter((function(n){return n!==e})):n.vtubers.push(e),n.allVtubers=!1})))}})}));return a.a.createElement(Pe,{key:n},a.a.createElement(Ue,{type:"button",onClick:function(){r(Object(De.a)((function(e){var n=new Set(e.vtubers);t.every((function(e){return n.has(e)}))?e.vtubers=e.vtubers.filter((function(e){return!t.includes(e)})):t.filter((function(e){return!n.has(e)})).forEach((function(n){e.vtubers.push(n)})),e.allVtubers=!1})))}},n),o)}));return a.a.createElement("div",null,a.a.createElement(Pe,null,"\u5168\u8868\u793a",a.a.createElement(ze,{checked:i,onChange:function(){r(Object(De.a)((function(e){e.allVtubers=!e.allVtubers})))}})),s)};function $e(){var e=Object(y.a)(["\n  border: none;\n  padding-left: 0;\n  margin-left: 0;\n"]);return $e=function(){return e},e}function qe(){var e=Object(y.a)(["\n  padding: 1rem;\n  padding-top: 0;\n"]);return qe=function(){return e},e}function Qe(){var e=Object(y.a)(["\n  background-color: #333;\n  border: 1px solid #555;\n  margin: 2rem auto;\n  width: clamp(0px, 90%, 800px);\n\n  h3 {\n    margin: 0;\n  }\n"]);return Qe=function(){return e},e}function Ye(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  padding-top: .5rem;\n  padding-right: .5rem;\n"]);return Ye=function(){return e},e}var en=G.a.div(Ye()),nn=G.a.div(Qe()),tn=G.a.div(qe()),rn=G.a.fieldset($e());var an=function(){var e=Object(l.useRecoilState)(M),n=Object(H.a)(e,2),t=n[0],r=n[1],c=Object(l.useRecoilState)(d),o=Object(H.a)(c,2),i=o[0],u=o[1],s=Object(l.useRecoilState)(T),m=Object(H.a)(s,2),f=m[0],b=m[1];return a.a.createElement(Ne,{open:t},a.a.createElement(nn,null,a.a.createElement(en,null,a.a.createElement(ce.a,{onClick:function(){return r(!1)},icon:oe.c})),a.a.createElement(tn,null,a.a.createElement("h3",null,"\u30d5\u30a3\u30eb\u30bf\u30fc"),a.a.createElement(rn,null,"\u4eca\u65e5\u306e\u30e9\u30a4\u30d6",a.a.createElement(ze,{onChange:function(){u(Object(De.a)((function(e){e.startFrom="today"===e.startFrom?"default":"today"})))},checked:"today"===i.startFrom})),a.a.createElement(Ze,null),a.a.createElement("h3",null,"\u8a2d\u5b9a"),a.a.createElement(rn,null,"\u30bf\u30a4\u30c8\u30eb\u3092\u8868\u793a",a.a.createElement(ze,{onChange:function(){b((function(e){return!e}))},checked:f})))))};var cn=function(){return a.a.createElement(i.a,null,a.a.createElement(V,null),a.a.createElement(l.RecoilRoot,null,a.a.createElement(x,null),a.a.createElement("div",{className:"App"},a.a.createElement(Ae,null),a.a.createElement("main",null,a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/text"},a.a.createElement(K,null)),a.a.createElement(u.a,{path:"/about"},a.a.createElement(He,null)),a.a.createElement(u.a,{exact:!0,path:"/"},a.a.createElement(Ee,null))),a.a.createElement(an,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(cn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.d15b7c12.chunk.js.map